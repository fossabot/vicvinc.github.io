<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>leetcode-partition-equal-subset-sum | vicvinc&#39;s notes.</title>
    <meta name="description" content="sunshine water air and something else.">
    
    
    <link rel="preload" href="/dist/assets/css/styles.ffcf3322.css" as="style"><link rel="preload" href="/dist/assets/js/app.ffcf3322.js" as="script"><link rel="preload" href="/dist/assets/js/10.435a7da9.js" as="script"><link rel="prefetch" href="/dist/assets/js/1.0a034649.js"><link rel="prefetch" href="/dist/assets/js/11.7ef9b428.js"><link rel="prefetch" href="/dist/assets/js/12.31763144.js"><link rel="prefetch" href="/dist/assets/js/2.1445329c.js"><link rel="prefetch" href="/dist/assets/js/3.5484c0ab.js"><link rel="prefetch" href="/dist/assets/js/4.54e6fb69.js"><link rel="prefetch" href="/dist/assets/js/5.99844738.js"><link rel="prefetch" href="/dist/assets/js/6.42f2e159.js"><link rel="prefetch" href="/dist/assets/js/7.215fe09e.js"><link rel="prefetch" href="/dist/assets/js/8.15cb8b0f.js"><link rel="prefetch" href="/dist/assets/js/9.f6a1a5af.js">
    <link rel="stylesheet" href="/dist/assets/css/styles.ffcf3322.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="container"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/dist/" class="home-link router-link-active"><!----><span class="site-name">vicvinc's notes.</span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/dist/" class="nav-link">Home</a></div><div class="nav-item"><a href="/dist/notes/" class="nav-link">Notes</a></div><div class="nav-item"><a href="/dist/gallery/" class="nav-link">Gallery</a></div><!----></nav></div></div></header><div class="sidebar-mask"></div><div class="container row m-auto"><!----><div class="page col-8"><div class="content"><h1 id="leetcode-partition-equal-subset-sum"><a href="#leetcode-partition-equal-subset-sum" aria-hidden="true" class="header-anchor">#</a> leetcode-partition-equal-subset-sum</h1><p><code>Given a non-empty array containing only positive integers, find if the array can be partitioned into two subsets such that the sum of elements in both subsets is equal.</code></p><p>找出一个数组中的和相等两个子数组</p><p>首先一个数组可以考虑为一个一维向量，其中两个子向量的和相等</p><p>记一维向量的和为 S0，子向量 1 的和为 S1，子向量 2 的和为 S2</p><p>从题目要求中可以看到</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token constant">S1</span> <span class="token operator">===</span> <span class="token constant">S2</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">S1</span> <span class="token operator">+</span> <span class="token constant">S2</span> <span class="token operator">===</span> <span class="token constant">S0</span><span class="token punctuation">;</span>
<span class="token comment">// 从而</span>
<span class="token punctuation">(</span><span class="token constant">S1</span> <span class="token operator">===</span> <span class="token constant">S2</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">S0</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">// 又因为输入都是正整数，所以可以判断出如果满足上述条件的一维向量和一定是偶数，即</span>
<span class="token constant">S0</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre></div><p>那么解题的思路可以考虑为,从一个数组中选取一个子数组，子数组的和等于该数组和的一半</p><p>再次整理问题就可以发现，这是一个从一个集合中选取一个子集，使其和等于一个常数的问题，这个问题也可以变化成求有多少个解的问题（八皇后，骑士环游世界，背包问题，等等）</p><p>如果再深挖一点，就可以知道这是一个 NP-C 问题，数学定义：</p><p>NP 完全或 NP 完备（NP-Complete，缩写为 NP-C 或 NPC），是计算复杂度理论中，决定性问题的档次之一。
NPC 问题，是 NP（非决定性多项式时间）中最难的决定性问题。
因此 NP 完备问题应该是最不可能被化简为 P（多项式时间可决定）的决定性问题的集合。
若任何 NPC 问题得到多项式时间的解法，那此解法就可应用在所有 NP 问题上。
一个 NPC 问题的例子是子集合加总问题，题目为给予一个有限数量的整数集合，找出任何一个此集合的非空子集且此子集内整数和为零。
这个问题的答案非常容易验证，但目前没有任何一个够快的方法可以在合理的时间内（意即多项式时间）找到答案。只能一个个将它的子集取出来一一测试，
它的时间复杂度是 Ο(2n)，n 是此集合的元素数量。</p><p>但是通常这类问题都有两个思路，一个是迭代，一个是递归，首先来说说迭代的思路。</p><p>迭代，就是从最基础的解开始，一步一步向目标累计，
比如，求一个数组的子数组，使其和等于 0，通常可以认为空数组的和为 0，所以得解，然后
求一个数组的子数组，使其和等于 1，再然后
求一个数组的子数组，使其和等于 2...
求一个数组的子数组，使其和等于 n</p><p>这里可以看到如果对于一个子数组，其和若能能满足 m，则这个子数组的所有子数组都可以满足 m，迭代的复杂度相对于数组的长度 l 和所求值的大小 n
时间复杂度为 l*n</p><p>递归，就是从结果开始，将求解的范围一步一步缩减为求更小范围内的解。</p><p>比如，求数组 A 的子数组，使其和等于 N，可以分解为求 A 的子数组 A1，使其和等于 N 减去 A1 相对于 A 的补集 A1’的和 N1
求数组 A1 的子数组，使其和等于 N1，可以进一步分解为求 A1 的子数组 B1，使其和等于 N1 减去 B1 相对于 A1 的补集 B1‘的和 N1’...</p><p>递归比较绕，我的想法就是基于递归做的，递归的算法复杂度过高，从算法中可以看出是一个 n！的复杂度，因此提交失败，但是对于小规模的问题，仍然是可以求出解的</p><p>在时间超时这个问题上，想了去怎么优化的问题，现在的感觉就是，递归的优化问题，首先考虑迭代！</p><p>递归版本:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> nums<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> cur<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    acc <span class="token operator">+=</span> cur<span class="token punctuation">;</span>
    <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// a = &gt; collection</span>
<span class="token comment">// b =&gt; index array</span>
<span class="token keyword">var</span> <span class="token function-variable function">diff</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> cur_index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>cur_index<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      acc<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">canPick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// console.log('===a, n====', a, n)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// fail</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// succ</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> index_arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> rt <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> temp_n <span class="token operator">=</span> n<span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> ii <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ii<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    rt<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    temp_n <span class="token operator">-=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    index_arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">canPick</span><span class="token punctuation">(</span><span class="token function">diff</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> index_arr<span class="token punctuation">)</span><span class="token punctuation">,</span> temp_n<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      rt<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      index_arr<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      temp_n <span class="token operator">+=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">sum</span><span class="token punctuation">(</span>rt<span class="token punctuation">)</span> <span class="token operator">===</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">canPartition</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token constant">S</span> <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">S</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token function">canPick</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token constant">S</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>迭代版本:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">canPartition</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">S</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> n <span class="token keyword">of</span> nums<span class="token punctuation">)</span> <span class="token constant">S</span> <span class="token operator">+=</span> n<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">S</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token constant">S</span> <span class="token operator">/=</span> <span class="token number">2</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    map<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    map<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//不是很理解为什么小于也可以为true</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token constant">S</span><span class="token punctuation">)</span> map<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> num <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 注意这里一定要取到S，不然就变为求S-1的解了</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token constant">S</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&gt;</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 变相理解为 j - num &lt; 0,此时的num不应该包含在解的空间中</span>
        map<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> map<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 此时可以归为（1-i）的子数组的解</span>
        map<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> map<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">|</span> map<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> num<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token operator">!</span>map<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="总结一下："><a href="#总结一下：" aria-hidden="true" class="header-anchor">#</a> 总结一下：</h2><p>需要实践的地方：</p><ol><li>数组之间的交差并补运算</li><li>ES6 的数组操作</li></ol><p>需要增强的理论：</p><ol><li>什么是 P 问题，什么是 NP 问题，什么是 NP 完备（NPC），什么是 NP-Hard</li><li>图论和树理论中是否有可以用来解这个问题的理论？</li></ol></div><div class="page-edit"><!----><!----></div><!----></div><div class="sidebar pt2 col-4"><nav class="nav-links"><div class="nav-item"><a href="/dist/" class="nav-link">Home</a></div><div class="nav-item"><a href="/dist/notes/" class="nav-link">Notes</a></div><div class="nav-item"><a href="/dist/gallery/" class="nav-link">Gallery</a></div><!----></nav><div class="col pt2"><div class="d-table-cell"><a href="https://vicvinc.github.io" title="Go to Github" aria-label="Go to Github" data-collection-slug="Github" class="link avatar"><img src="/distassets/img/avatar.41c883f2.jpeg" alt="freeCodeCamp.org" class="avatar-image"></a></div><div class="d-table-cell pl1">C3H6 design.</div><div class="nemo">Silence is Golden.</div><a href="https://github.com/vicvinc">More information</a><div class="pt15 pb15 mb15"><header class="else-where mb15">Elsewhere</header><div class="linkSet"><a href="mailto:vicvinvinc@gmail.com" title="Email" aria-label="Email" class="mr15"><span class="svgIcon svgIcon--email svgIcon--21px"><img src="/distassets/img/mail.20e8982e.svg"></span></a><a href="//github.com/vicvinc" title="github page" aria-label="github page" target="_blank"><span><img src="/distassets/img/github.5cff78e4.svg"></span></a></div></div></div></div></div><footer class="footer"><div class="container"><p class="text-right">
      made somewhere in the internet with
      <span class="f-heart">♥</span>
      by vicvinc since @2016-2018
    </p></div></footer></div></div>
    <script src="/dist/assets/js/10.435a7da9.js" defer></script><script src="/dist/assets/js/app.ffcf3322.js" defer></script>
  </body>
</html>
